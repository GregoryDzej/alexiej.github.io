<!DOCTYPE html>
<html lang="pl-PL">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kaggle Wyzwanie - Titanic | One Page Knowledge</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.01caefc4.css" as="style"><link rel="preload" href="/assets/js/app.0a2f9cc2.js" as="script"><link rel="preload" href="/assets/js/1.d735e2ba.js" as="script"><link rel="prefetch" href="/assets/js/2.71b981fa.js"><link rel="prefetch" href="/assets/js/3.114db11f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.01caefc4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      One Page Knowledge
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Kaggle Wyzwanie - Titanic</span><!----></p><ul class="sidebar-group-items"><li><a href="/kaggle-titanic/#wstep" class="sidebar-link">Wstęp</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/kaggle-titanic/#titanic-wstep" class="sidebar-link">Titanic, Wstęp</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/kaggle-titanic/#podstawowe-operacje" class="sidebar-link">Podstawowe operacje</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/kaggle-titanic/#podstawowe-operacje-python" class="sidebar-link">Podstawowe operacje: Python</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaggle-titanic/#biblioteki" class="sidebar-link">Biblioteki</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#pd-read-csv-name-header-index-col" class="sidebar-link">pd.readcsv(name,header, indexcol)</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#pd-concat-a-b" class="sidebar-link">pd.concat(a,b)</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#df-info" class="sidebar-link">df.info()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#df-head" class="sidebar-link">df.head()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#wybieranie-kolumn" class="sidebar-link">Wybieranie kolumn</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#filtrowanie" class="sidebar-link">Filtrowanie</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#df-isnull" class="sidebar-link">df.isnull()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#groupby" class="sidebar-link">groupby()</a></li></ul></li><li><a href="/kaggle-titanic/#podstawowe-operacje-r" class="sidebar-link">Podstawowe operacje: R</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaggle-titanic/#biblioteki-2" class="sidebar-link">Biblioteki</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#read-csv" class="sidebar-link">read_csv()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#rbind" class="sidebar-link">rbind()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#str" class="sidebar-link">str()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#dim" class="sidebar-link">dim()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#head" class="sidebar-link">head()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#summary" class="sidebar-link">summary()</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#wybieranie-kolumn-2" class="sidebar-link">Wybieranie kolumn</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#filtrowanie-2" class="sidebar-link">Filtrowanie</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#grupowanie" class="sidebar-link">Grupowanie</a></li></ul></li><li><a href="/kaggle-titanic/#wykresy-i-wyszukiwanie-danych" class="sidebar-link">Wykresy i wyszukiwanie danych</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/kaggle-titanic/#dane-python" class="sidebar-link">Dane: Python</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaggle-titanic/#kategoryzacja" class="sidebar-link">Kategoryzacja</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#kategoryzacja-kolumny-cabin" class="sidebar-link">Kategoryzacja kolumny Cabin</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#korelacja" class="sidebar-link">Korelacja</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#tytul-pattern" class="sidebar-link">Tytuł - Pattern</a></li></ul></li><li><a href="/kaggle-titanic/#wykresy-python" class="sidebar-link">Wykresy: Python</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaggle-titanic/#histogram" class="sidebar-link">Histogram</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#boxplot" class="sidebar-link">Boxplot</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#correlation-map" class="sidebar-link">Correlation map</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#dendrogram" class="sidebar-link">Dendrogram</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#heatmap" class="sidebar-link">Heatmap</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#wykresy-zbiorowe" class="sidebar-link">Wykresy zbiorowe</a></li></ul></li><li><a href="/kaggle-titanic/#dane-r" class="sidebar-link">Dane: R</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaggle-titanic/#kategoryzacja-2" class="sidebar-link">Kategoryzacja</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#kategoryzacja-kolumny-cabin-2" class="sidebar-link">Kategoryzacja kolumny Cabin</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#korelacja-2" class="sidebar-link">Korelacja</a></li><li class="sidebar-sub-header"><a href="/kaggle-titanic/#tytul-pattern-2" class="sidebar-link">Tytuł - Pattern</a></li></ul></li><li><a href="/kaggle-titanic/#wykresy-r" class="sidebar-link">Wykresy: R</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaggle-titanic/#histogram-2" class="sidebar-link">Histogram</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="kaggle-wyzwanie-titanic"><a href="#kaggle-wyzwanie-titanic" aria-hidden="true" class="header-anchor">#</a> Kaggle Wyzwanie - Titanic</h1><h2 id="wstep"><a href="#wstep" aria-hidden="true" class="header-anchor">#</a> Wstęp</h2><p>Witam wszystkich chętnych którzy chcieli by spróbować wyzwania Kaggle - Titanic. Jest to pierwsze zadanie z którym stykają się wszyscy na Kaggle zaraz po rejestracji.</p><p>Wyzwanie jest zaplanowane na 2 tygodnie od poniedziałku (09-07-2018) do następnego poniedziałku (23-07-2018). Jeśli termin już minął ta stroną będzie cały czas na Github tak żeby mieć możliwość przystąpić później.</p><p>Będzie on zarówno w R jak i Python tak żeby każdy nie był pokrzywdzony. Jest on podstawowy, dlatego można pytać o wszystko (od instalacji pythona, co to jest pip, po statystykę, itp..).</p><p>Planuje żeby w ciągu tygodnia robić 3 omówienia (w poniedziałek, środę i piątek) rozłożone na dwa tygodnie tak żeby każdy mógł mieć czas na przemyślenia, napisanie kodu i jeszcze pytania.</p><ol><li>(poniedziałek) Opis problemu, Importowanie danych i podstawowe informacje</li><li>(środa) Wykresy i wyszukiwanie danych</li><li>(piątek) Wypełnianie pustych danych i normalizacja Danych</li><li>(poniedziałek) Klasyfikacja - algorytm</li><li>(środa) Poprawianie Modelu</li><li>(piątek) Podsumowanie</li></ol><p>Podczas każdego omówienia postaram się opisać (github) co się dzieje i podać rozwiązanie dla każdego języka. W razie jakilkowiek pytań będzie można zadawać na slacku. Prosze mieć na uwadzę że też się uczę części rzeczy (zwłaszcza R), tak więc jak będzie jakiś błąd, niezrozumienie z mojej strony albo uwagi, proszę mnie o tym poinformować a ja to postaram się poprawić 😃</p><p>Wyzwanie można śledzić na grupie: https://www.facebook.com/groups/1733307126704677/</p><p>Osoby chętne, proszę dołączyć do slacka:  https://kagglepolska.slack.com  (link na grupie)
A pytania można zadawać na grupie pod #titanic</p><p>Przed warto sobie zainstalować środowiska. Do pythona polecam Anaconda które zawiera Pythona oraz edytor Spyder:</p><p><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.anaconda.com%2Fdownload%2F&h=AT3KBJmnbNForgOyaBAthdtEwHokEBcN5wxhecOaP6KHrogmjIahWy5QBvC4EQrI4zT_Hn-gux-DYbjT5GdcrRikdd1G-dSwlIoSoD2moZzk9goafB4NGDL3m9YJjespZhktWV1t-Xv--ij3KT0cpm62" target="_blank" rel="noopener noreferrer">https://www.anaconda.com/download/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Do R
Edytor: Rstudio <a href="https://www.rstudio.com/products/rstudio/download/" target="_blank" rel="noopener noreferrer">https://www.rstudio.com/products/rstudio/download/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
oraz interpretator: Microsoft R Open
<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fmran.microsoft.com%2Fopen&h=AT2yK6gYzYee0aJb_MNB13kBtZsBowTu2_O0sXZuGF7sn0rUwGD2hBEe1-MZkXgCYwsdh1m3HxZ3BzYtVHgzQoQO_Ba6-MwwfnZhMLOkYFf4W9y5Nu4g2nqeId-jk6QmwA3X_DKB5zOJyhCVFM03quuV" target="_blank" rel="noopener noreferrer">https://mran.microsoft.com/open<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Link do Titanic na kaggle:
<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.kaggle.com%2Fc%2Ftitanic&h=AT2raqxH5o2kx34UcBIb47BhFisW4MaJQlXqEfze91zsu8UjNqyx5wOVzLWE7PJTjF2pMD6XwaQ3IegwUZ72RHuMPDNy57d-aRDREXwfMl3ULS4hOsCTT6FO2bqTEzyptCDQd_tU_iWk_kK2T48rt7C4" target="_blank" rel="noopener noreferrer">https://www.kaggle.com/c/titanic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Zaczynamy od poniedziałku, i życzę powodzenia 😃</p><h2 id="titanic-wstep"><a href="#titanic-wstep" aria-hidden="true" class="header-anchor">#</a> Titanic, Wstęp</h2><p>Jak można wyczytać, głównym zamiarem jest sklasyfikowanie pasażerów pod względem przeżycia podczas zatonięcia Tytanika które to miało miejsce w 15 kwietnia 1912. Jest to przykład binarnej klasyfikacji w której na podstawie danych wejściowych  (takich jak klasa, numer biletu, płeć itp..) mamy wywnioskować czy osoba ta przeżyła wypadek.</p><p>Nie licząc żę był to zwykły łut szczescia można wyobrażić sobie kilka czynników które rzeczywiście miały na to wpływ.
Do nich można zaliczyć:</p><ul><li>Jak blisko ich kajuty były łodzi ratunkowych</li><li>W jakim wieku byli, np: młodsze osoby albo kobiety z dziećmi miały większe prawdopobieństwo dostania się do kajuty.</li><li>Osoby mające droższe bilety a więc wyżej sytuowane mogli mieć jakieś przywileje</li></ul><p>I tutaj to badanie ma za zadanie wyliczyć to powiązanie.
Na początku warto zobaczyć sobie dane wejściowe. Na wstępie mamy takie oto kolumny:</p><table><thead><tr><th>Variable</th><th></th></tr></thead><tbody><tr><td>Zmienna (Variable)</td><td>Opis</td></tr><tr><td>Survived</td><td>Czy dana osoba przeżyła. 0 - Nie, 1 - Tak. Ta wartość pojawia się tylko w test</td></tr><tr><td>PClass</td><td>Klasa socio-economic (SEC), 1- Upper, 2 - Middle, 3rd - Lower</td></tr><tr><td>Name</td><td>Imi i nazwisko oddzielone przecinkiem</td></tr><tr><td>Sex</td><td>Płeć, ‘male’ - męzczyzna , ‘female’- kobieta</td></tr><tr><td>Age</td><td>wiek</td></tr><tr><td>SibSp</td><td>(siblink) liczba rodzeństwa (brat i siostra) / (spouses) małżonków na pokładzie</td></tr><tr><td>parchl</td><td>iczba rodziców / dziecie na pokładzie</td></tr><tr><td>fare</td><td>opłata za bilet</td></tr><tr><td>cabin</td><td>numer kabiny</td></tr><tr><td>embarked</td><td>Port źródłowy /załadunkowy (C - Cherbourk, Q - Quenstown, S - Southampton)</td></tr></tbody></table><p>Pełny wygląd klas można zobaczyć na stronie:
<a href="https://www.encyclopedia-titanica.org/class-gender-titanic-disaster-1912~chapter-2.html" target="_blank" rel="noopener noreferrer">https://www.encyclopedia-titanica.org/class-gender-titanic-disaster-1912~chapter-2.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Przeglądając pobieżnie można zobaczyć że nie wszystkie dane są wypełnione, więc trzeba je  w pewnym momencie wypełnić.</p><h2 id="podstawowe-operacje"><a href="#podstawowe-operacje" aria-hidden="true" class="header-anchor">#</a> Podstawowe operacje</h2><p>Zaczynając prace z Kaggle mamy tak naprawdę 3 możliwości:</p><ol><li>Możemy ściągnąć dane train i test i działać na nim lokalnie</li><li>Możemy utworzyć Kernel i wysłać skrypt który rozwiąże zadanie</li><li>Możemy utworzyć Kernel i za pomocą edytora “Jupyter Notebooks”nie tylko wykonać wszystkie operacje ale także dodać w wygodnym edytorze MarkDown własne przypisy czy wykresy.</li></ol><p>Ja wybrałem Markdown bo można na bieżąco kontrolować co się dzieje.
Jeśli chcesz utworzyć nowy kernel na stronie <a href="https://www.kaggle.com/c/titanic" target="_blank" rel="noopener noreferrer">https://www.kaggle.com/c/titanic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> wybieramy Kernels -&gt; New Kernel -&gt; Notebook u góry po prawej możemy zmienić język z Python (który jest domyślny) na R.</p><h2 id="podstawowe-operacje-python"><a href="#podstawowe-operacje-python" aria-hidden="true" class="header-anchor">#</a> Podstawowe operacje: Python</h2><p>Do podstawowych operacji pandas dobrze popatrzeć na cheatsheet:</p><p><a href="http://pandas.pydata.org/Pandas_Cheat_Sheet.pdf" target="_blank" rel="noopener noreferrer">http://pandas.pydata.org/Pandas_Cheat_Sheet.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Krótkie porównanie znalezione na facebook-u.</p><p><img src="assets/33869776_1049764301843195_3825253901389529088_n.jpg" alt="No automatic alt text available."></p><h3 id="biblioteki"><a href="#biblioteki" aria-hidden="true" class="header-anchor">#</a> Biblioteki</h3><p>Pierwsze co pozostaje to zaimportowanie najważniejszych bibliotek które przydadzą się do operacji na danych.</p><div class="language-R extra-class"><pre class="language-r"><code>import numpy as np <span class="token comment"># linear algebra</span>
import pandas as pd <span class="token comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span>

from subprocess import check_output
print<span class="token punctuation">(</span>check_output<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;../input&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>.decode<span class="token punctuation">(</span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>numpy - podstawowy biblioteka do algebry liniowej</li><li>pandas - biblioteka dzięki której można używać powszechne struktury data.frame bardzo pomocne przy obliczeniach</li></ul><h3 id="pd-read-csv-name-header-index-col"><a href="#pd-read-csv-name-header-index-col" aria-hidden="true" class="header-anchor">#</a> pd.read_csv(name,header, index_col)</h3><p>Do importu danych służy polecenia pd.read_csv() z biblioteki pandas. Bibliotek ta zwraca nam automatycznie obiekt DataFrame. Ten obiekt po pierwsze jest wygodniejszy do obliczeń typowych danych które są w formie dwuwymiarowej (wiersze i kolumny) a po drugie szybszy.</p><ul><li>header - 0 wskazuje że zerowy wiersze będzie nam wskazywał nazwy kolumn</li><li>index_col - Wskazuje gdzie się znajduje kolumna z id (tutaj PassengerID)</li></ul><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># Load the data, we set that index_col is the first column, therefore there will be standard index start from 0 for each data.</span>
train_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../input/train.csv'</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
test_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../input/test.csv'</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="pd-concat-a-b"><a href="#pd-concat-a-b" aria-hidden="true" class="header-anchor">#</a> pd.concat(a,b)</h3><p>To polecenie na początku łączy nam oba obiekty po wierszach. Analizę danych powinniśmy robić na całym obszarze, bo może się zdarzyć że np: w train kolumna ma wszystkie pola wypełnione ale w tests już nie.</p><div class="language-Python extra-class"><pre class="language-python"><code>full <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>train_df <span class="token punctuation">,</span> test_df<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># concatenate two dataframes</span>
</code></pre></div><h3 id="df-info"><a href="#df-info" aria-hidden="true" class="header-anchor">#</a> df.info()</h3><p>Pokazuje podstawowe informacje obiektu, pozwala się rozejrzeć co za dane są w posczególnych kolumnach.</p><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># info about dataframe</span>
</code></pre></div><div class="language-Python extra-class"><pre class="language-python"><code><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'pandas.core.frame.DataFrame'</span><span class="token operator">&gt;</span>
Int64Index<span class="token punctuation">:</span> <span class="token number">1309</span> entries<span class="token punctuation">,</span> <span class="token number">1</span> to <span class="token number">1309</span>
Data columns <span class="token punctuation">(</span>total <span class="token number">11</span> columns<span class="token punctuation">)</span><span class="token punctuation">:</span>
Age         <span class="token number">1046</span> non<span class="token operator">-</span>null float64
Cabin       <span class="token number">295</span> non<span class="token operator">-</span>null <span class="token builtin">object</span>
Embarked    <span class="token number">1307</span> non<span class="token operator">-</span>null <span class="token builtin">object</span>
Fare        <span class="token number">1308</span> non<span class="token operator">-</span>null float64
Name        <span class="token number">1309</span> non<span class="token operator">-</span>null <span class="token builtin">object</span>
Parch       <span class="token number">1309</span> non<span class="token operator">-</span>null int64
Pclass      <span class="token number">1309</span> non<span class="token operator">-</span>null int64
Sex         <span class="token number">1309</span> non<span class="token operator">-</span>null <span class="token builtin">object</span>
SibSp       <span class="token number">1309</span> non<span class="token operator">-</span>null int64
Survived    <span class="token number">891</span> non<span class="token operator">-</span>null float64
Ticket      <span class="token number">1309</span> non<span class="token operator">-</span>null <span class="token builtin">object</span>
dtypes<span class="token punctuation">:</span> float64<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> int64<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">object</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
memory usage<span class="token punctuation">:</span> <span class="token number">122.7</span><span class="token operator">+</span> KB
</code></pre></div><ul><li>Ponieważ 1309 to jest łączna liczba wierszy, to tam gdzie znajduje się ich mniej (poza Survived które nie występuje w test_df) znajdują się wartości które nie są wypełniona.</li></ul><h3 id="df-head"><a href="#df-head" aria-hidden="true" class="header-anchor">#</a> df.head()</h3><p>Pokazuje pierwsze wiersze danych i można się spostrzec że Cabin, Embarked, Name, Sex oraz Ticket które .info() są jako object tak naprawdę to tekst.</p><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531139493410.png" alt="1531139493410"></p><h3 id="wybieranie-kolumn"><a href="#wybieranie-kolumn" aria-hidden="true" class="header-anchor">#</a> Wybieranie kolumn</h3><div class="language-R extra-class"><pre class="language-r"><code><span class="token comment"># import matplotlib.pyplot as plt</span>
    
full<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;Age&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Pclass&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">]</span>
</code></pre></div><p><img src="assets/1531308637239.png" alt="1531308637239"></p><h3 id="filtrowanie"><a href="#filtrowanie" aria-hidden="true" class="header-anchor">#</a> Filtrowanie</h3><p>Przykłady wybierania wierszy:</p><ul><li>Jak w pythonie do każdej listy można wybierać przez indeks</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token punctuation">[</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token comment"># Pierwszych 10 elementów</span>
</code></pre></div><p><img src="assets/1531140219285.png" alt="1531140219285"></p><ul><li>5 ostatnich elementów</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token punctuation">]</span> 
</code></pre></div><p><img src="assets/1531140338132.png" alt="1531140338132"></p><ul><li>Konkretnie od konkretnego wiersza idąc co 2, 891 - to pierwszy wiersz z bazy test_df</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>SURV <span class="token operator">=</span> <span class="token number">891</span>
full<span class="token punctuation">[</span>SURV<span class="token punctuation">:</span>SURV<span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># Like in regular Python you can get to the Item by Index</span>
</code></pre></div><ul><li>filtrowanie po kolumnie</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token punctuation">[</span><span class="token punctuation">(</span>full<span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">5.0</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>full<span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">7.0</span> <span class="token punctuation">)</span> <span class="token punctuation">]</span> <span class="token comment">#filter data by columns</span>
</code></pre></div><p><img src="assets/1531140453333.png" alt="1531140453333"></p><ul><li>Filtrowanie po tekście</li></ul><div class="language-python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span><span class="token punctuation">(</span>full<span class="token punctuation">[</span><span class="token string">'Cabin'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'B2'</span><span class="token punctuation">,</span>na<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">]</span> <span class="token comment">#filter data by columns</span>
</code></pre></div><p><img src="assets/1531140486070.png" alt="1531140486070"></p><ul><li>filtrowanie po pustych wartościach</li></ul><div class="language-Python extra-class"><pre class="language-python"><code> full<span class="token punctuation">[</span>full<span class="token punctuation">[</span><span class="token string">'Embarked'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p><img src="assets/1531307994646.png" alt="1531307994646"></p><h3 id="df-isnull"><a href="#df-isnull" aria-hidden="true" class="header-anchor">#</a> df.isnull()</h3><p>Najważniejsze jest znalezielenie pustych wierszy. .isnull() zwraca nam cały zbiór z wartościami False,True czy jest pusta, .sum grupuje je dla wszystkich kolumn.</p><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># Check with alues are empty</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>Age             <span class="token number">263</span>
Cabin          <span class="token number">1014</span>
Embarked          <span class="token number">2</span>
Fare              <span class="token number">1</span>
Name              <span class="token number">0</span>
Parch             <span class="token number">0</span>
Pclass            <span class="token number">0</span>
Sex               <span class="token number">0</span>
SibSp             <span class="token number">0</span>
Survived        <span class="token number">418</span>
Ticket            <span class="token number">0</span>
CabinType         <span class="token number">0</span>
_CabinType        <span class="token number">0</span>
CabinType2        <span class="token number">0</span>
_CabinType2       <span class="token number">0</span>
dtype<span class="token operator">:</span> int64

</code></pre></div><ul><li>Wartości Age,Cabin, Embarked, Fare, trzeba będzie uzupełnić danymi przed dalszym przetwarzaniem</li><li>Istnieje także wykres który pokazuje puste wartości</li></ul><div class="language-R extra-class"><pre class="language-r"><code><span class="token comment">#Missing values in the plot</span>
import missingno as msno
msno.matrix<span class="token punctuation">(</span>full<span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531140669235.png" alt="1531140669235"></p><h3 id="groupby"><a href="#groupby" aria-hidden="true" class="header-anchor">#</a> groupby()</h3><p>Dane też można grupować by zobaczyć jak wyglądają zmienne na poszczególne grupy (np: sumujemy sobie ilość osób które przeżyły w podziale na klasy i płeć)</p><div class="language-R extra-class"><pre class="language-r"><code>train_df.groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Pclass'</span><span class="token punctuation">,</span><span class="token string">'Sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span>.sum<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># grouping data</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>Pclass  Sex   
<span class="token number">1</span>       female    <span class="token number">91</span>
        male      <span class="token number">45</span>
<span class="token number">2</span>       female    <span class="token number">70</span>
        male      <span class="token number">17</span>
<span class="token number">3</span>       female    <span class="token number">72</span>
        male      <span class="token number">47</span>
Name<span class="token operator">:</span> Survived<span class="token punctuation">,</span> dtype<span class="token operator">:</span> int64
</code></pre></div><h2 id="podstawowe-operacje-r"><a href="#podstawowe-operacje-r" aria-hidden="true" class="header-anchor">#</a> Podstawowe operacje: R</h2><p>Podstawowe funkcje można znaleść w:</p><p><a href="https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf" target="_blank" rel="noopener noreferrer">https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Tidyverse+Cheat+Sheet.pdf" target="_blank" rel="noopener noreferrer">https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Tidyverse+Cheat+Sheet.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" target="_blank" rel="noopener noreferrer">https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h3 id="biblioteki-2"><a href="#biblioteki-2" aria-hidden="true" class="header-anchor">#</a> Biblioteki</h3><p>Najpierw importujemy biblioteki</p><div class="language-R extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>tidyverse<span class="token punctuation">)</span> <span class="token comment"># metapackage with lots of helpful functions</span>
list.files<span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;../input&quot;</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>tidyverse - kolekcja paczek do data-science, zawiera w sobie już wiele potrzebnych paczek</li></ul><p>W R podobnie jak w python podstawowym obiektem na którym operujemy jest data.frame (w książce Biecka “Przewodnik po pakiecie R” nazywane także  jako“ramki danych”) który jest 2 wymiarową tablicą z kolumnami i wierszami. W przypadku większych danych jest jeszcze struktura data.table ale dla 1309 tysiąca wierszy wystarczy zwykły data.frame.</p><h3 id="read-csv"><a href="#read-csv" aria-hidden="true" class="header-anchor">#</a> read_csv()</h3><div class="language-R extra-class"><pre class="language-r"><code>train <span class="token operator">&lt;-</span> read_csv<span class="token punctuation">(</span><span class="token string">'../input/train.csv'</span><span class="token punctuation">)</span>
test  <span class="token operator">&lt;-</span> read_csv<span class="token punctuation">(</span><span class="token string">'../input/test.csv'</span><span class="token punctuation">)</span>
</code></pre></div><p>import danych, funkcja już wie że pierwszy wiersz opisuje kolumny, nie trzeba to zaznaczać w metodzie.</p><h3 id="rbind"><a href="#rbind" aria-hidden="true" class="header-anchor">#</a> rbind()</h3><p>Połączenie wierszy danych, tak żeby móc zobaczyć pełną informację o danych. Nie można łączyć danych o różnych ilościach kolumn dlatego do kolumny test$Survived dodajemy pustą informację.</p><div class="language-R extra-class"><pre class="language-r"><code>test<span class="token operator">$</span>Survived <span class="token operator">&lt;-</span> <span class="token keyword">NA</span>
full <span class="token operator">&lt;-</span> rbind<span class="token punctuation">(</span>train<span class="token punctuation">,</span> test<span class="token punctuation">)</span>
</code></pre></div><h3 id="str"><a href="#str" aria-hidden="true" class="header-anchor">#</a> str()</h3><p>Podaje podstawe informacje o danych, jak typ - przykłady wartości.</p><div class="language-R extra-class"><pre class="language-r"><code>str<span class="token punctuation">(</span>full<span class="token punctuation">)</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>Classes ‘tbl_df’<span class="token punctuation">,</span> ‘tbl’ and <span class="token string">'data.frame'</span><span class="token operator">:</span>	<span class="token number">1309</span> obs. of  <span class="token number">12</span> variables<span class="token operator">:</span>
 <span class="token operator">$</span> PassengerId<span class="token operator">:</span> num  <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">10</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Survived   <span class="token operator">:</span> num  <span class="token number">0</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Pclass     <span class="token operator">:</span> num  <span class="token number">3</span> <span class="token number">1</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">3</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">3</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Name       <span class="token operator">:</span> chr  <span class="token string">&quot;Braund, Mr. Owen Harris&quot;</span> <span class="token string">&quot;Cumings, Mrs. John Bradley (Florence Briggs Thayer)&quot;</span> <span class="token string">&quot;Heikkinen, Miss. Laina&quot;</span> <span class="token string">&quot;Futrelle, Mrs. Jacques Heath (Lily May Peel)&quot;</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Sex        <span class="token operator">:</span> chr  <span class="token string">&quot;male&quot;</span> <span class="token string">&quot;female&quot;</span> <span class="token string">&quot;female&quot;</span> <span class="token string">&quot;female&quot;</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Age        <span class="token operator">:</span> num  <span class="token number">22</span> <span class="token number">38</span> <span class="token number">26</span> <span class="token number">35</span> <span class="token number">35</span> <span class="token keyword">NA</span> <span class="token number">54</span> <span class="token number">2</span> <span class="token number">27</span> <span class="token number">14</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> SibSp      <span class="token operator">:</span> num  <span class="token number">1</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">3</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Parch      <span class="token operator">:</span> num  <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">0</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Ticket     <span class="token operator">:</span> chr  <span class="token string">&quot;A/5 21171&quot;</span> <span class="token string">&quot;PC 17599&quot;</span> <span class="token string">&quot;STON/O2. 3101282&quot;</span> <span class="token string">&quot;113803&quot;</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Fare       <span class="token operator">:</span> num  <span class="token number">7.25</span> <span class="token number">71.28</span> <span class="token number">7.92</span> <span class="token number">53.1</span> <span class="token number">8.05</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Cabin      <span class="token operator">:</span> chr  <span class="token keyword">NA</span> <span class="token string">&quot;C85&quot;</span> <span class="token keyword">NA</span> <span class="token string">&quot;C123&quot;</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> Embarked   <span class="token operator">:</span> chr  <span class="token string">&quot;S&quot;</span> <span class="token string">&quot;C&quot;</span> <span class="token string">&quot;S&quot;</span> <span class="token string">&quot;S&quot;</span> <span class="token ellipsis">...</span>
 <span class="token operator">-</span> attr<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token string">&quot;spec&quot;</span><span class="token punctuation">)</span><span class="token operator">=</span>
  .. cols<span class="token punctuation">(</span>
  ..   PassengerId <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Survived <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Pclass <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Name <span class="token operator">=</span> col_character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Sex <span class="token operator">=</span> col_character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Age <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   SibSp <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Parch <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Ticket <span class="token operator">=</span> col_character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Fare <span class="token operator">=</span> col_double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Cabin <span class="token operator">=</span> col_character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ..   Embarked <span class="token operator">=</span> col_character<span class="token punctuation">(</span><span class="token punctuation">)</span>
  .. <span class="token punctuation">)</span>
</code></pre></div><h3 id="dim"><a href="#dim" aria-hidden="true" class="header-anchor">#</a> dim()</h3><p>Zwraca rozmiar data.frame (wiersze i kolumny )</p><div class="language-R extra-class"><pre class="language-r"><code>dim<span class="token punctuation">(</span>full<span class="token punctuation">)</span>
nrow<span class="token punctuation">(</span>full<span class="token punctuation">)</span> <span class="token comment">#liczba kolumn</span>
ncol<span class="token punctuation">(</span>full<span class="token punctuation">)</span> <span class="token comment">#liczba wierszy</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code><span class="token number">1309</span> <span class="token number">12</span>
</code></pre></div><h3 id="head"><a href="#head" aria-hidden="true" class="header-anchor">#</a> head()</h3><p>Zwraca kilka pierwszych wierszy do rozeznania się.</p><div class="language-R extra-class"><pre class="language-r"><code>head<span class="token punctuation">(</span>full<span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531141911613.png" alt="1531141911613"></p><h3 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> summary()</h3><div class="language-R extra-class"><pre class="language-r"><code>summary<span class="token punctuation">(</span>full<span class="token punctuation">)</span>
</code></pre></div><p>Zwraca podstawowe informacje o kolumnach - jak liczba pustych wartości, wartość minimalna, maksymalna, mediana itp… Już widać że kilka kolumn ma puste wartości które to trzeba będzie uzupełnić póżniej. (NA’s)</p><div class="language-R extra-class"><pre class="language-r"><code> PassengerId      Survived          Pclass          Name          
 Min.   <span class="token operator">:</span>   <span class="token number">1</span>   Min.   <span class="token operator">:</span><span class="token number">0.0000</span>   Min.   <span class="token operator">:</span><span class="token number">1.000</span>   Length<span class="token operator">:</span><span class="token number">1309</span>       
 <span class="token number">1</span>st Qu.<span class="token operator">:</span> <span class="token number">328</span>   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">0.0000</span>   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">2.000</span>   Class <span class="token operator">:</span>character  
 Median <span class="token operator">:</span> <span class="token number">655</span>   Median <span class="token operator">:</span><span class="token number">0.0000</span>   Median <span class="token operator">:</span><span class="token number">3.000</span>   Mode  <span class="token operator">:</span>character  
 Mean   <span class="token operator">:</span> <span class="token number">655</span>   Mean   <span class="token operator">:</span><span class="token number">0.3838</span>   Mean   <span class="token operator">:</span><span class="token number">2.295</span>                     
 <span class="token number">3</span>rd Qu.<span class="token operator">:</span> <span class="token number">982</span>   <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">1.0000</span>   <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">3.000</span>                     
 Max.   <span class="token operator">:</span><span class="token number">1309</span>   Max.   <span class="token operator">:</span><span class="token number">1.0000</span>   Max.   <span class="token operator">:</span><span class="token number">3.000</span>                     
                NAs   <span class="token operator">:</span><span class="token number">418</span>                                        
     Sex                 Age            SibSp            Parch      
 Length<span class="token operator">:</span><span class="token number">1309</span>        Min.   <span class="token operator">:</span> <span class="token number">0.17</span>   Min.   <span class="token operator">:</span><span class="token number">0.0000</span>   Min.   <span class="token operator">:</span><span class="token number">0.000</span>  
 Class <span class="token operator">:</span>character   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">21.00</span>   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">0.0000</span>   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">0.000</span>  
 Mode  <span class="token operator">:</span>character   Median <span class="token operator">:</span><span class="token number">28.00</span>   Median <span class="token operator">:</span><span class="token number">0.0000</span>   Median <span class="token operator">:</span><span class="token number">0.000</span>  
                    Mean   <span class="token operator">:</span><span class="token number">29.88</span>   Mean   <span class="token operator">:</span><span class="token number">0.4989</span>   Mean   <span class="token operator">:</span><span class="token number">0.385</span>  
                    <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">39.00</span>   <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">1.0000</span>   <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">0.000</span>  
                    Max.   <span class="token operator">:</span><span class="token number">80.00</span>   Max.   <span class="token operator">:</span><span class="token number">8.0000</span>   Max.   <span class="token operator">:</span><span class="token number">9.000</span>  
                    NAs   <span class="token operator">:</span><span class="token number">263</span>

    Ticket               Fare            Cabin             Embarked        
 Length<span class="token operator">:</span><span class="token number">1309</span>        Min.   <span class="token operator">:</span>  <span class="token number">0.000</span>   Length<span class="token operator">:</span><span class="token number">1309</span>        Length<span class="token operator">:</span><span class="token number">1309</span>       
 Class <span class="token operator">:</span>character   <span class="token number">1</span>st Qu.<span class="token operator">:</span>  <span class="token number">7.896</span>   Class <span class="token operator">:</span>character   Class <span class="token operator">:</span>character  
 Mode  <span class="token operator">:</span>character   Median <span class="token operator">:</span> <span class="token number">14.454</span>   Mode  <span class="token operator">:</span>character   Mode  <span class="token operator">:</span>character  
                    Mean   <span class="token operator">:</span> <span class="token number">33.295</span>                                        
                    <span class="token number">3</span>rd Qu.<span class="token operator">:</span> <span class="token number">31.275</span>                                        
                    Max.   <span class="token operator">:</span><span class="token number">512.329</span>                                        
                    NAs   <span class="token operator">:</span><span class="token number">1</span>  
</code></pre></div><h3 id="wybieranie-kolumn-2"><a href="#wybieranie-kolumn-2" aria-hidden="true" class="header-anchor">#</a> Wybieranie kolumn</h3><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token punctuation">[</span><span class="token punctuation">,</span>c<span class="token punctuation">(</span><span class="token string">&quot;Survived&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Pclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>Lub przez select z dplyr</li></ul><div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>dplyr<span class="token punctuation">)</span>

select<span class="token punctuation">(</span>full<span class="token punctuation">,</span>Survived<span class="token punctuation">,</span>Pclass<span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531142375531.png" alt="1531142375531"></p><h3 id="filtrowanie-2"><a href="#filtrowanie-2" aria-hidden="true" class="header-anchor">#</a> Filtrowanie</h3><ul><li>Dane można zaznaczać przez indeksy</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
</code></pre></div><p><img src="assets/1531142283314.png" alt="1531142283314"></p><ul><li>Do bardziej zaawansowango filtrowania po wartościach używa się biblioteki dplyr. Można używać złączeń typu AND “&amp;”OR “|” NOT “!”</li></ul><div class="language-R extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>dplyr<span class="token punctuation">)</span>

filter<span class="token punctuation">(</span>full<span class="token punctuation">,</span> Age <span class="token operator">&gt;</span> <span class="token number">5.0</span> <span class="token operator">&amp;</span> Age <span class="token operator">&lt;</span> <span class="token number">7.0</span> <span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531142536699.png" alt="1531142536699"></p><ul><li>Dodatkowo można to kaskadować na kolejne wyrażenia z dplyr. W tym wypadku nie trzeba za każdym razem zaznaczać danych (full)</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full <span class="token percent-operator operator">%&gt;%</span> 
	filter<span class="token punctuation">(</span>Age <span class="token operator">&gt;</span> <span class="token number">5.0</span> <span class="token operator">&amp;</span> Age <span class="token operator">&lt;</span> <span class="token number">7.0</span> <span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
	select<span class="token punctuation">(</span>Survived<span class="token punctuation">,</span>Pclass<span class="token punctuation">)</span>
</code></pre></div><ul><li>sprawdzanie pustych wartości</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full <span class="token percent-operator operator">%&gt;%</span> 
	filter<span class="token punctuation">(</span> is.na<span class="token punctuation">(</span>Fare<span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531305635780.png" alt="1531305635780"></p><ul><li>Filtrowanie po tekście używająć stringr</li></ul><p>https://cran.r-project.org/web/packages/stringr/vignettes/stringr.html</p><div class="language-R extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>stringr<span class="token punctuation">)</span>

full <span class="token percent-operator operator">%&gt;%</span>
    filter<span class="token punctuation">(</span> str_detect<span class="token punctuation">(</span>Cabin<span class="token punctuation">,</span> <span class="token string">'B2'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531306666463.png" alt="1531306666463"></p><h3 id="grupowanie"><a href="#grupowanie" aria-hidden="true" class="header-anchor">#</a> Grupowanie</h3><ul><li>Do sumowania i groupowania przydaje się dplyr, tutaj wymagane jest jeszcze usunięcie pustych wartości survived ponieważ w przeciwnym wypadku pojawi się N/A w wyniku.</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full <span class="token percent-operator operator">%&gt;%</span>
	drop_na<span class="token punctuation">(</span>Survived<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    group_by<span class="token punctuation">(</span>Pclass<span class="token punctuation">,</span>Sex<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
	summarise<span class="token punctuation">(</span>Survived <span class="token operator">=</span> sum<span class="token punctuation">(</span>Survived<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>Można też nie używać drop_na a opcji <span class="badge error top">na.rm=T</span></li></ul><div class="language-R extra-class"><pre class="language-r"><code>full <span class="token percent-operator operator">%&gt;%</span>
    group_by<span class="token punctuation">(</span>Pclass<span class="token punctuation">,</span>Sex<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
	summarise<span class="token punctuation">(</span>Survived <span class="token operator">=</span> sum<span class="token punctuation">(</span>Survived<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> T<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531143148049.png" alt="1531143148049"></p><h2 id="wykresy-i-wyszukiwanie-danych"><a href="#wykresy-i-wyszukiwanie-danych" aria-hidden="true" class="header-anchor">#</a> Wykresy i wyszukiwanie danych</h2><p>Tak naprawdę pod tym pojęciem chciałem napisać w jaki sposób można dodać kolumny zawierające dodatkowe informacje które kryją się w surowych danych ponieważ może się zdarzyć że:</p><ul><li>Jakieś informacje znajdują się w tekście a ponieważ znajdują się tam także inne informacje to algorytm nie wykryje że dana zmienna ma istotny wpływ</li><li>Niektóre dane są zbyt rozdrobnione (np: wiek) przez co zaburzają obraz całego modelu. Przecięz podczas próby uratowania się nikt nie pytał dokładnie o wiek, więc można podzielić je na mniejsze grupy typu małe dzieci, dorośli itp..</li><li>Część danych jest w postaci tekstowej, i trzeba je skategoryzować.</li></ul><h2 id="dane-python"><a href="#dane-python" aria-hidden="true" class="header-anchor">#</a> Dane: Python</h2><h3 id="kategoryzacja"><a href="#kategoryzacja" aria-hidden="true" class="header-anchor">#</a> Kategoryzacja</h3><ul><li>Pierwszym problemem  w danych są dane tekstowe którze trzeba skategoryzować. W tym wypadku można użyć pandas.Categorical()</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span><span class="token string">'_Sex'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>Categorical<span class="token punctuation">(</span>full<span class="token punctuation">.</span>Sex<span class="token punctuation">)</span><span class="token punctuation">.</span>codes
full<span class="token punctuation">[</span><span class="token string">'_Embarked'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>Categorical<span class="token punctuation">(</span>full<span class="token punctuation">.</span>Embarked<span class="token punctuation">)</span><span class="token punctuation">.</span>codes
</code></pre></div><p>W nowych kolumnach pojawią wartości 0  1</p><h3 id="kategoryzacja-kolumny-cabin"><a href="#kategoryzacja-kolumny-cabin" aria-hidden="true" class="header-anchor">#</a> Kategoryzacja kolumny Cabin</h3><ul><li>Także tą kolumnę można skategoryzować. Można zauważyć że pierwsza litera może mieć jakieś znaczenie. Nie wszystkie dane są wypełnione,</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span><span class="token string">'_CabinType'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>Categorical<span class="token punctuation">(</span>full<span class="token punctuation">[</span><span class="token string">'Cabin'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>codes
</code></pre></div><h3 id="korelacja"><a href="#korelacja" aria-hidden="true" class="header-anchor">#</a> Korelacja</h3><ul><li>Korelacja przydaje się do sprawdzenia zależności w kolumnach
<ul><li>Korelacja wynosząca 1.0 oznacza pełną dodanie powiązanie (Jest na przekątnych),</li><li>Korelacja wynosząca -1.0 oznacza odwrotne powiązanie</li><li>Im bliższe 0 tym korelacja jest mniejsza</li></ul></li></ul><p>Z poniższego można wywnioskować że największy wpływ na przeżycie może mieć Pclass, _Sex, Fare, oraz _ CabinType. Musieliśmy wcześniej skategoryzować kolumnu ponieważ korelacji nie można sprawdzić na tekście.</p><div class="language-Python extra-class"><pre class="language-python"><code>cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">,</span><span class="token string">'_Embarked'</span><span class="token punctuation">,</span><span class="token string">'Fare'</span><span class="token punctuation">,</span><span class="token string">'Parch'</span><span class="token punctuation">,</span><span class="token string">'Pclass'</span><span class="token punctuation">,</span><span class="token string">'_Sex'</span><span class="token punctuation">,</span><span class="token string">'SibSp'</span><span class="token punctuation">,</span><span class="token string">'Survived'</span><span class="token punctuation">,</span><span class="token string">'_CabinType'</span><span class="token punctuation">]</span>
full<span class="token punctuation">[</span>cols<span class="token punctuation">]</span><span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531313541410.png" alt="1531313541410"></p><h3 id="tytul-pattern"><a href="#tytul-pattern" aria-hidden="true" class="header-anchor">#</a> Tytuł - Pattern</h3><ul><li>Warto sobie wyciągnąć tytuł z imienia i nazwiska czyli kolumny Name. Do tego przydaje się regular expression</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>pat <span class="token operator">=</span> r<span class="token string">&quot;,\s([^ .]+)\.?\s+&quot;</span>

full<span class="token punctuation">[</span><span class="token string">'Title'</span><span class="token punctuation">]</span> <span class="token operator">=</span>  full<span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span>pat<span class="token punctuation">,</span>expand<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
full<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'Title'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-Python extra-class"><pre class="language-python"><code>Title
Capt          <span class="token number">1</span>
Col           <span class="token number">4</span>
Don           <span class="token number">1</span>
Dona          <span class="token number">1</span>
Dr            <span class="token number">8</span>
Jonkheer      <span class="token number">1</span>
Lady          <span class="token number">1</span>
Major         <span class="token number">2</span>
Master       <span class="token number">61</span>
Miss        <span class="token number">260</span>
Mlle          <span class="token number">2</span>
Mme           <span class="token number">1</span>
Mr          <span class="token number">757</span>
Mrs         <span class="token number">197</span>
Ms            <span class="token number">2</span>
Rev           <span class="token number">8</span>
Sir           <span class="token number">1</span>
the           <span class="token number">1</span>
Name<span class="token punctuation">:</span> Title<span class="token punctuation">,</span> dtype<span class="token punctuation">:</span> int64
</code></pre></div><p>Najwięcej jest Miss, Master, Mr, oraz Mrs. Więc dla lepszego obrazu można zgrupować część danych.</p><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>full<span class="token punctuation">[</span><span class="token string">'Title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Mille'</span><span class="token punctuation">,</span><span class="token string">'Ms'</span><span class="token punctuation">,</span><span class="token string">'Lady'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Miss'</span>
full<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>full<span class="token punctuation">[</span><span class="token string">'Title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Mme'</span><span class="token punctuation">,</span><span class="token string">'Sir'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Mrs'</span>
full<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token operator">~</span>full<span class="token punctuation">[</span><span class="token string">'Title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Miss'</span><span class="token punctuation">,</span><span class="token string">'Master'</span><span class="token punctuation">,</span><span class="token string">'Mr'</span><span class="token punctuation">,</span><span class="token string">'Mrs'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Other'</span> <span class="token comment"># NOT IN</span>
full<span class="token punctuation">[</span><span class="token string">'_Title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>Categorical<span class="token punctuation">(</span>full<span class="token punctuation">.</span>Title<span class="token punctuation">)</span><span class="token punctuation">.</span>codes
full<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'Title'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-Python extra-class"><pre class="language-python"><code>Title
Master     <span class="token number">61</span>
Miss      <span class="token number">263</span>
Mr        <span class="token number">757</span>
Mrs       <span class="token number">199</span>
Other      <span class="token number">29</span>
Name<span class="token punctuation">:</span> Title<span class="token punctuation">,</span> dtype<span class="token punctuation">:</span> int64
</code></pre></div><ul><li>Od razu zmniejszyła się ilość kategorii</li></ul><h2 id="wykresy-python"><a href="#wykresy-python" aria-hidden="true" class="header-anchor">#</a> Wykresy: Python</h2><p>W pythonie do podstawowych wykresów głównie się używa matplotlib, seaborn oraz ggplot (bazujące na ggplot2 z R-a).</p><h3 id="histogram"><a href="#histogram" aria-hidden="true" class="header-anchor">#</a> Histogram</h3><ul><li>Podstawowym wykresem jest histogram czyli rozłożenie wartości według częstości występowania.</li></ul><div class="language-python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>hist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p><img src="assets/1531308774581.png" alt="1531308774581"></p><p>Od razu widać żę najwięcej jest osób w przedziale od 20 do 30 roku życia.</p><ul><li>Ale możemy chcieć też większy podział albo przefiltrowane na tylko te które przeżyły</li></ul><div class="language-python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span>full<span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>hist<span class="token punctuation">(</span>bins<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531308927382.png" alt="1531308927382"></p><ul><li>Można też nałożyć na siebie histogramy (za pomocą plt z matplotlib). Tworzymy dwa histogramy (plt_all i plt_survived), dodajemy legendę i wyświetlamy.</li></ul><div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

plt_all <span class="token operator">=</span> plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>full<span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bins <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span>  <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'all'</span><span class="token punctuation">)</span>
plt_survived <span class="token operator">=</span>plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>full<span class="token punctuation">[</span>full<span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bins <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'Survived'</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531310603373.png" alt="1531310603373"></p><p>Zauważyć można żę młodsi mają większą szansę przeżycia (pomarańczowa pokrywa połowę wartości albo większość dla od 0 do 10)</p><h3 id="boxplot"><a href="#boxplot" aria-hidden="true" class="header-anchor">#</a> Boxplot</h3><p>Zawiera on dużo informacji więc lepiej doczytać co oznaczają poszczególne wartości</p><p>https://www.wellbeingatschool.org.nz/information-sheet/understanding-and-interpreting-box-plots</p><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>column<span class="token operator">=</span><span class="token string">'Age'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531311039013.png" alt="1531311039013"></p><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>column<span class="token operator">=</span><span class="token string">'Age'</span><span class="token punctuation">,</span>by<span class="token operator">=</span><span class="token string">'Pclass'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531311958613.png" alt="1531311958613"></p><h3 id="correlation-map"><a href="#correlation-map" aria-hidden="true" class="header-anchor">#</a> Correlation map</h3><ul><li>Dzięki correlation map możemy odczytać związki pomiędzy poszczególnymi kolumnami</li></ul><h3 id="dendrogram"><a href="#dendrogram" aria-hidden="true" class="header-anchor">#</a> Dendrogram</h3><ul><li>Jednym z ciekawszych wykresów jest dendogram, który pokazuje zależności danych  w postaci drzewa</li></ul><p>Ten wykres można potraktować jako ciekawostkę, jedyne co można odczytać to to że Cabin i Age są najbardziej wpływowymi kolumnami.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> missingno <span class="token keyword">as</span> msno
msno<span class="token punctuation">.</span>dendrogram<span class="token punctuation">(</span>full<span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531313292348.png" alt="1531313292348"></p><h3 id="heatmap"><a href="#heatmap" aria-hidden="true" class="header-anchor">#</a> Heatmap</h3><ul><li>Heatmap pozwala zobaczyć zależności z korelacji. Ujemne korelacje są na ciemniejsz, a dodanie na coraz jaśniejsze.</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Age'</span><span class="token punctuation">,</span><span class="token string">'_Embarked'</span><span class="token punctuation">,</span><span class="token string">'Fare'</span><span class="token punctuation">,</span><span class="token string">'Parch'</span><span class="token punctuation">,</span><span class="token string">'Pclass'</span><span class="token punctuation">,</span><span class="token string">'_Sex'</span><span class="token punctuation">,</span><span class="token string">'SibSp'</span><span class="token punctuation">,</span><span class="token string">'Survived'</span><span class="token punctuation">,</span><span class="token string">'_CabinType'</span><span class="token punctuation">]</span>
corr <span class="token operator">=</span> full<span class="token punctuation">[</span>cols<span class="token punctuation">]</span><span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>corr<span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531314238165.png" alt="1531314238165"></p><h3 id="wykresy-zbiorowe"><a href="#wykresy-zbiorowe" aria-hidden="true" class="header-anchor">#</a> Wykresy zbiorowe</h3><ul><li>Wykresy można grupować przez sublots() - podajemy ilość kolumn i wierszy. Np, ja mogę łatwo zobaczyć stosunek ilości przeżytych do całości.</li></ul><div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">for</span> column <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'Pclass'</span><span class="token punctuation">,</span><span class="token string">'Sex'</span><span class="token punctuation">,</span><span class="token string">'SibSp'</span><span class="token punctuation">,</span><span class="token string">'Parch'</span><span class="token punctuation">,</span><span class="token string">'Embarked'</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
    fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token punctuation">(</span>train_df
        <span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span>
        <span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>ax<span class="token operator">=</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span>train_df
        <span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span>
        <span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>ax<span class="token operator">=</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531314471042.png" alt="1531314471042"></p><p><img src="assets/1531314556333.png" alt="1531314556333"></p><p><img src="assets/1531314565053.png" alt="1531314565053"></p><ul><li>Wyciągnałem tak też nową kolumnę TicketCounts które oznacza ile osób ma ten sam numer biletu.</li></ul><div class="language-Python extra-class"><pre class="language-python"><code>full<span class="token punctuation">[</span><span class="token string">'TicketCounts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> full<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Ticket'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Ticket'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span>full
<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'TicketCounts'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span>
<span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>full
<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'TicketCounts'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Survived'</span><span class="token punctuation">]</span>
<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531314658243.png" alt="1531314658243"></p><h2 id="dane-r"><a href="#dane-r" aria-hidden="true" class="header-anchor">#</a> Dane: R</h2><h3 id="kategoryzacja-2"><a href="#kategoryzacja-2" aria-hidden="true" class="header-anchor">#</a> Kategoryzacja</h3><ul><li>W przypadku R kategoryzacja polega na przerobieniu na factor za pomocą as.factor a następnie na as.numeric</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token operator">$</span>Sex2 <span class="token operator">&lt;-</span> as.numeric<span class="token punctuation">(</span>as.factor<span class="token punctuation">(</span>full<span class="token operator">$</span>Sex<span class="token punctuation">)</span><span class="token punctuation">)</span>
full<span class="token punctuation">[</span><span class="token string">'_Embarked'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd.Categorical<span class="token punctuation">(</span>full.Embarked<span class="token punctuation">)</span>.codes

</code></pre></div><h3 id="kategoryzacja-kolumny-cabin-2"><a href="#kategoryzacja-kolumny-cabin-2" aria-hidden="true" class="header-anchor">#</a> Kategoryzacja kolumny Cabin</h3><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token operator">$</span>Cabin2 <span class="token operator">&lt;-</span>as.numeric<span class="token punctuation">(</span>as.factor<span class="token punctuation">(</span>substring<span class="token punctuation">(</span>full<span class="token operator">$</span>Cabin<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="korelacja-2"><a href="#korelacja-2" aria-hidden="true" class="header-anchor">#</a> Korelacja</h3><ul><li>Korelacje można wwykonać przez funkcję</li></ul><div class="language-R extra-class"><pre class="language-r"><code>cols <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">'Age'</span><span class="token punctuation">,</span><span class="token string">'Sex2'</span><span class="token punctuation">,</span><span class="token string">'Embarked2'</span><span class="token punctuation">,</span><span class="token string">'Fare'</span><span class="token punctuation">,</span><span class="token string">'Parch'</span><span class="token punctuation">,</span><span class="token string">'Pclass'</span><span class="token punctuation">,</span><span class="token string">'SibSp'</span><span class="token punctuation">,</span><span class="token string">'Survived'</span><span class="token punctuation">,</span><span class="token string">'Cabin2'</span><span class="token punctuation">)</span>
cor<span class="token punctuation">(</span> full<span class="token punctuation">[</span><span class="token punctuation">,</span>cols<span class="token punctuation">]</span><span class="token punctuation">,</span> use<span class="token operator">=</span><span class="token string">&quot;complete.obs&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531319057276.png" alt="1531319057276"></p><p>Widać największą korelację przy kolumnie Sex2, Age, Fare. To pomoże przy określaniu kolumn dostępnych do algorytmu.</p><h3 id="tytul-pattern-2"><a href="#tytul-pattern-2" aria-hidden="true" class="header-anchor">#</a> Tytuł - Pattern</h3><ul><li>Warto sobie wyciągnąć tytuł z imienia i nazwiska czyli kolumny Name. Do tego przydaje się regular expression</li><li>Tytuł można wyłuskać przez str_match z biblioteki</li></ul><div class="language-R extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>stringr<span class="token punctuation">)</span>
full<span class="token operator">$</span>Title <span class="token operator">&lt;-</span> str_match<span class="token punctuation">(</span>full<span class="token operator">$</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;,\\s([^ .]+)\\.?\\s+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>full <span class="token percent-operator operator">%&gt;%</span> 
  group_by<span class="token punctuation">(</span>Title<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
  summarise<span class="token punctuation">(</span>cnt <span class="token operator">=</span> n<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  arrange<span class="token punctuation">(</span>desc<span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code> Title      cnt
   <span class="token operator">&lt;</span>chr<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>int<span class="token operator">&gt;</span>
 <span class="token number">1</span> Mr         <span class="token number">757</span>
 <span class="token number">2</span> Miss       <span class="token number">260</span>
 <span class="token number">3</span> Mrs        <span class="token number">197</span>
 <span class="token number">4</span> Master      <span class="token number">61</span>
 <span class="token number">5</span> Dr           <span class="token number">8</span>
 <span class="token number">6</span> Rev          <span class="token number">8</span>
 <span class="token number">7</span> Col          <span class="token number">4</span>
 <span class="token number">8</span> Major        <span class="token number">2</span>
 <span class="token number">9</span> Mlle         <span class="token number">2</span>
<span class="token number">10</span> Ms           <span class="token number">2</span>
<span class="token number">11</span> Capt         <span class="token number">1</span>
<span class="token number">12</span> Don          <span class="token number">1</span>
<span class="token number">13</span> Dona         <span class="token number">1</span>
<span class="token number">14</span> Jonkheer     <span class="token number">1</span>
<span class="token number">15</span> Lady         <span class="token number">1</span>
<span class="token number">16</span> Mme          <span class="token number">1</span>
<span class="token number">17</span> Sir          <span class="token number">1</span>
<span class="token number">18</span> the          <span class="token number">1</span>
</code></pre></div><ul><li>Część danych nie jest potrzebna, dlatego najlepiej zgrupować je sobie w kilka kategori do lepszego predykcji</li></ul><div class="language-R extra-class"><pre class="language-r"><code>full<span class="token operator">$</span>Title2 <span class="token operator">&lt;-</span> full<span class="token operator">$</span>Title
full<span class="token operator">$</span>Title2<span class="token punctuation">[</span> full<span class="token operator">$</span>Title <span class="token percent-operator operator">%in%</span> c<span class="token punctuation">(</span><span class="token string">'Mille'</span><span class="token punctuation">,</span><span class="token string">'Ms'</span><span class="token punctuation">,</span><span class="token string">'Lady'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token string">'Miss'</span>
full<span class="token operator">$</span>Title2<span class="token punctuation">[</span> full<span class="token operator">$</span>Title <span class="token percent-operator operator">%in%</span> c<span class="token punctuation">(</span><span class="token string">'Mme'</span><span class="token punctuation">,</span><span class="token string">'Sir'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token string">'Mrs'</span>
full<span class="token operator">$</span>Title2<span class="token punctuation">[</span> <span class="token operator">!</span> full<span class="token operator">$</span>Title <span class="token percent-operator operator">%in%</span> c<span class="token punctuation">(</span><span class="token string">'Miss'</span><span class="token punctuation">,</span><span class="token string">'Master'</span><span class="token punctuation">,</span><span class="token string">'Mr'</span><span class="token punctuation">,</span><span class="token string">'Mrs'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token string">'Other'</span> 

full <span class="token percent-operator operator">%&gt;%</span> 
  group_by<span class="token punctuation">(</span>Title2<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
  summarise<span class="token punctuation">(</span>cnt <span class="token operator">=</span> n<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  arrange<span class="token punctuation">(</span>desc<span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code> Title2   cnt
  <span class="token operator">&lt;</span>chr<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>int<span class="token operator">&gt;</span>
<span class="token number">1</span> Mr       <span class="token number">757</span>
<span class="token number">2</span> Miss     <span class="token number">260</span>
<span class="token number">3</span> Mrs      <span class="token number">197</span>
<span class="token number">4</span> Master    <span class="token number">61</span>
<span class="token number">5</span> Other     <span class="token number">34</span>
</code></pre></div><h2 id="wykresy-r"><a href="#wykresy-r" aria-hidden="true" class="header-anchor">#</a> Wykresy: R</h2><h3 id="histogram-2"><a href="#histogram-2" aria-hidden="true" class="header-anchor">#</a> Histogram</h3><div class="language-R extra-class"><pre class="language-r"><code>hist<span class="token punctuation">(</span>full<span class="token operator">$</span>Age<span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531320637716.png" alt="1531320637716"></p><div class="language-R extra-class"><pre class="language-r"><code>ggplot<span class="token punctuation">(</span>data<span class="token operator">=</span>full<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>full<span class="token operator">$</span>Age<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> geom_histogram<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531320658550.png" alt="1531320658550"></p><div class="language-R extra-class"><pre class="language-r"><code>ggplot<span class="token punctuation">(</span>data<span class="token operator">=</span>full<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>full<span class="token operator">$</span>Age<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> geom_histogram<span class="token punctuation">(</span>bins<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="assets/1531320805570.png" alt="1531320805570"></p></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/assets/js/1.d735e2ba.js" defer></script><script src="/assets/js/app.0a2f9cc2.js" defer></script>
  </body>
</html>
